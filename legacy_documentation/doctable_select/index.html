
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../doctable_schema_legacy/">
      
      
        <link rel="next" href="../doctable_update/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.10">
    
    
      
        <title>DocTable Examples: Select - doctable</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#doctable-examples-select" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="doctable" class="md-header__button md-logo" aria-label="doctable" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            doctable
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DocTable Examples: Select
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/devincornell/doctable" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    devincornell/doctable
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="doctable" class="md-nav__button md-logo" aria-label="doctable" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    doctable
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/devincornell/doctable" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    devincornell/doctable
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation and Change Log
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../documentation/a-ex_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../documentation/b-ex_schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Table Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../documentation/c-ex_select/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Select Queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../documentation/d-ex_insert_delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insert and Delete Queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../documentation/e-iris_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iris Vignette
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Legacy documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Legacy documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../a-introduction_to_legacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to Legacy doctable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dataclass_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataclass Schema Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dataclass_vignette_advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced dataclass schema vignette
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../depric_vignette_newsgroups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NewsGroups Dataset Vignette
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../distributed_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distribute Parallel Processing Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Document Bootstrapping Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_concurrency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concurrent Database Connections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_connectengine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manage SQL Connections with DocTable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_file_column_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable File Column Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_insert_delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Examples: Insert and Delete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_multitable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example: Multiple Tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_parsetreedoc_column/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ParseTreeDoc Column Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_picklefile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Example: Pickle and Text Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_schema_dataclass/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Example: Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_schema_legacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    DocTable Examples: Select
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    DocTable Examples: Select
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#regular-selects" class="md-nav__link">
    <span class="md-ellipsis">
      Regular Selects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-selects" class="md-nav__link">
    <span class="md-ellipsis">
      Conditional Selects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#column-operators" class="md-nav__link">
    <span class="md-ellipsis">
      Column Operators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#order-by-group-by-limit" class="md-nav__link">
    <span class="md-ellipsis">
      ORDER BY, GROUP BY, LIMIT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-string-commands-and-additional-clauses" class="md-nav__link">
    <span class="md-ellipsis">
      SQL String Commands and Additional Clauses
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#count-method-and-get-next-id" class="md-nav__link">
    <span class="md-ellipsis">
      Count Method and Get Next ID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-as-pandas-series-and-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Select as Pandas Series and DataFrame
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../doctable_update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Examples: Update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../example_nss_1_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vignette 1: Storing Document Metadata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../example_nss_2_parsing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vignette 2: Storing Document Text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../example_nss_3_parsetrees/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vignette 3: Storing Parsed Documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../example_nss_intro_dataclass/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example 1: US National Security Strategy Document Corpus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../legacy_adv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable (slightly more) Advanced Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../legacy_simple/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DocTable Simple Example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../parse_parsepipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ParsePipeline Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../parse_parsetrees/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with doctable Parsetrees
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#regular-selects" class="md-nav__link">
    <span class="md-ellipsis">
      Regular Selects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-selects" class="md-nav__link">
    <span class="md-ellipsis">
      Conditional Selects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#column-operators" class="md-nav__link">
    <span class="md-ellipsis">
      Column Operators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#order-by-group-by-limit" class="md-nav__link">
    <span class="md-ellipsis">
      ORDER BY, GROUP BY, LIMIT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-string-commands-and-additional-clauses" class="md-nav__link">
    <span class="md-ellipsis">
      SQL String Commands and Additional Clauses
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#count-method-and-get-next-id" class="md-nav__link">
    <span class="md-ellipsis">
      Count Method and Get Next ID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-as-pandas-series-and-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      Select as Pandas Series and DataFrame
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="doctable-examples-select">DocTable Examples: Select</h1>
<p>Here I show how to select data from a DocTable. We cover object-oriented conditional selects emulating the <code>WHERE</code> SQL clause, as well as some reduce functions.</p>
<pre><code class="language-python">import random
import pandas as pd
import numpy as np
import sys
sys.path.append('..')
import doctable
</code></pre>
<pre><code class="language-python">import dataclasses
@doctable.schema
class Record:
    __slots__ = []
    id: int = doctable.IDCol()
    name: str = doctable.Col(nullable=False)
    age: int = None
    is_old: bool = None

table = doctable.DocTable(target=':memory:', schema=Record, verbose=True)
print(table)
</code></pre>
<pre><code>&lt;DocTable (4 cols)::sqlite:///:memory::_documents_&gt;
</code></pre>
<pre><code class="language-python">N = 10
for i in range(N):
    age = random.random() # number in [0,1]
    is_old = age &gt; 0.5
    table.insert({'name':'user_'+str(i), 'age':age, 'is_old':is_old}, verbose=False)
print(table)
</code></pre>
<pre><code>&lt;DocTable (4 cols)::sqlite:///:memory::_documents_&gt;


/DataDrive/code/doctable/examples/../doctable/doctable.py:365: UserWarning: Method .insert() is depricated. Please use .q.insert_single(), .q.insert_single_raw(), .q.insert_multi(), or .q.insert_multi() instead.
  warnings.warn('Method .insert() is depricated. Please use .q.insert_single(), '
/DataDrive/code/doctable/examples/../doctable/doctable.py:391: UserWarning: .insert_single() is depricated: please use .q.insert_single() or .q.insert_single_raw()
  warnings.warn(f'.insert_single() is depricated: please use .q.insert_single() or '
</code></pre>
<h2 id="regular-selects">Regular Selects</h2>
<p>These functions all return lists of ResultProxy objects. As such, they can be accessed using numerical indices or keyword indices. For instance, if one select output row is <code>row=(1, 'user_0')</code> (after selecting "id" and "user"), it can be accessed such that <code>row[0]==row['id']</code> and <code>row[1]==row['user']</code>.</p>
<pre><code class="language-python"># the limit argument means the result will only return some rows.
# I'll use it for convenience in these examples.
# this selects all rows
table.select(limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_
 LIMIT ? OFFSET ?


/DataDrive/code/doctable/examples/../doctable/doctable.py:449: UserWarning: Method .select() is depricated. Please use .q.select() instead.
  warnings.warn('Method .select() is depricated. Please use .q.select() instead.')





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python">table.select(['id','name'], limit=1)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name 
FROM _documents_
 LIMIT ? OFFSET ?





[Record(id=1, name='user_0', age=None, is_old=None)]
</code></pre>
<pre><code class="language-python"># can also select by accessing the column object (db['id']) itself
# this will be useful later with more complex queries
table.select([table['id'],table['name']], limit=1)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name 
FROM _documents_
 LIMIT ? OFFSET ?





[Record(id=1, name='user_0', age=None, is_old=None)]
</code></pre>
<pre><code class="language-python">table.select_first()
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_
 LIMIT ? OFFSET ?


/DataDrive/code/doctable/examples/../doctable/doctable.py:427: UserWarning: Method .select_first() is depricated. Please use .q.select_first() instead.
  warnings.warn('Method .select_first() is depricated. Please use .q.select_first() instead.')





Record(id=1, name='user_0', age=0.30111935823671676, is_old=False)
</code></pre>
<pre><code class="language-python">table.select('name',limit=5)
</code></pre>
<pre><code>DocTable: SELECT _documents_.name 
FROM _documents_
 LIMIT ? OFFSET ?





['user_0', 'user_1', 'user_2', 'user_3', 'user_4']
</code></pre>
<pre><code class="language-python">table.select_first('age')
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_
 LIMIT ? OFFSET ?





Record(age=0.30111935823671676, is_old=None)
</code></pre>
<h2 id="conditional-selects">Conditional Selects</h2>
<pre><code class="language-python">table.select(where=table['id']==2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id = ?





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python">table.select(where=table['id']&lt;3)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id &lt; ?





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python"># mod operator works too
table.select(where=(table['id']%2)==0, limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id % ? = ?
 LIMIT ? OFFSET ?





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True)]
</code></pre>
<pre><code class="language-python"># note parantheses to handle order of ops with overloaded bitwise ops
table.select(where= (table['id']&gt;=2) &amp; (table['id']&lt;=4) &amp; (table['name']!='user_2'))
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id &gt;= ? AND _documents_.id &lt;= ? AND _documents_.name != ?





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True)]
</code></pre>
<pre><code class="language-python">table.select(where=table['name'].in_(('user_2','user_3')))
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.name IN (__[POSTCOMPILE_name_1])





[Record(id=3, name='user_2', age=0.33272186856831554, is_old=False),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True)]
</code></pre>
<pre><code class="language-python">table.select(where=table['id'].between(2,4))
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id BETWEEN ? AND ?





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True),
 Record(id=3, name='user_2', age=0.33272186856831554, is_old=False),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True)]
</code></pre>
<pre><code class="language-python"># use of logical not operator &quot;~&quot;
table.select(where= ~(table['name'].in_(('user_2','user_3'))) &amp; (table['id'] &lt; 4))
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE (_documents_.name NOT IN (__[POSTCOMPILE_name_1])) AND _documents_.id &lt; ?





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python"># more verbose operators .and_, .or_, and .not_ are bound to the doctable package
table.select(where= doctable.f.or_(doctable.f.not_(table['id']==4)) &amp; (table['id'] &lt;= 2))
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id != ? AND _documents_.id &lt;= ?





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python"># now with simple computation
ages = table.select(table['age'])
mean_age = sum(ages)/len(ages)
table.select(table['name'], where=table['age']&gt;mean_age, limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_
DocTable: SELECT _documents_.name 
FROM _documents_ 
WHERE _documents_.age &gt; ?
 LIMIT ? OFFSET ?





['user_1', 'user_3']
</code></pre>
<pre><code class="language-python"># apply .label() method to columns
dict(table.select_first([table['age'].label('myage'), table['name'].label('myname')], as_dataclass=False))
</code></pre>
<pre><code>DocTable: SELECT _documents_.age AS myage, _documents_.name AS myname 
FROM _documents_
 LIMIT ? OFFSET ?


/DataDrive/code/doctable/examples/../doctable/doctable.py:429: UserWarning: The "as_dataclass" parameter has been depricated: please set get_raw=True or select_raw to specify that you would like to retrieve a raw RowProxy pobject.
  warnings.warn(f'The "as_dataclass" parameter has been depricated: please set get_raw=True or '





{'myage': 0.30111935823671676, 'myname': 'user_0'}
</code></pre>
<h2 id="column-operators">Column Operators</h2>
<p>I bind the .min, .max, .count, .sum, and .mode methods to the column objects. Additionally, I move the .count method to a separate DocTable2 method.</p>
<pre><code class="language-python"># with labels now
dict(table.select_first([table['age'].sum().label('sum'), table['age'].count().label('ct')], as_dataclass=False))
</code></pre>
<pre><code>DocTable: SELECT sum(_documents_.age) AS sum, count(_documents_.age) AS ct 
FROM _documents_
 LIMIT ? OFFSET ?





{'sum': 4.99992719426638, 'ct': 10}
</code></pre>
<pre><code class="language-python">table.select_first([table['age'].sum(), table['age'].count(), table['age']], as_dataclass=False)
</code></pre>
<pre><code>DocTable: SELECT sum(_documents_.age) AS sum_1, count(_documents_.age) AS count_1, _documents_.age 
FROM _documents_
 LIMIT ? OFFSET ?





(4.99992719426638, 10, 0.30111935823671676)
</code></pre>
<h2 id="order-by-group-by-limit">ORDER BY, GROUP BY, LIMIT</h2>
<p>These additional arguments have also been provided.</p>
<pre><code class="language-python"># the limit is obvious - it has been used throughout these examples
table.select(limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_
 LIMIT ? OFFSET ?





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python">table.select([table['is_old'], doctable.f.count()], groupby=table['is_old'])
</code></pre>
<pre><code>DocTable: SELECT _documents_.is_old, count(*) AS count_1 
FROM _documents_ GROUP BY _documents_.is_old
DocTable: SELECT _documents_.is_old, count(*) AS count_1 
FROM _documents_ GROUP BY _documents_.is_old


/DataDrive/code/doctable/examples/../doctable/doctable.py:464: UserWarning: Conversion from row to object failed according to the following error. Please use .q.select_raw() when requesting non-object formatted data such as counts or sums in the future. For now it is automatically converted. e=RowDataConversionFailed("Conversion from &lt;class 'sqlalchemy.engine.row.LegacyRow'&gt; to &lt;class '__main__.Record'&gt; failed.")
  warnings.warn(f'Conversion from row to object failed according to the following '





[(False, 5), (True, 5)]
</code></pre>
<pre><code class="language-python"># orderby clause
table.select(orderby=table['age'].desc(), limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ ORDER BY _documents_.age DESC
 LIMIT ? OFFSET ?





[Record(id=4, name='user_3', age=0.9011039173289395, is_old=True),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python"># compound orderby
table.select(orderby=(table['age'].desc(),table['is_old'].asc()), limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ ORDER BY _documents_.age DESC, _documents_.is_old ASC
 LIMIT ? OFFSET ?





[Record(id=4, name='user_3', age=0.9011039173289395, is_old=True),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python">f = doctable.f
cols = [table['is_old'], f.count().label('ct')]
table.q.select_raw(cols, groupby=table['is_old'], orderby=f.asc('ct'))
</code></pre>
<pre><code>DocTable: SELECT _documents_.is_old, count(*) AS ct 
FROM _documents_ GROUP BY _documents_.is_old ORDER BY ct ASC





[(False, 5), (True, 5)]
</code></pre>
<pre><code class="language-python"># can also use column name directly
# can only use ascending and can use only one col
table.select(orderby='age', limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ ORDER BY _documents_.age
 LIMIT ? OFFSET ?





[Record(id=7, name='user_6', age=0.04850236983248746, is_old=False),
 Record(id=6, name='user_5', age=0.300309388680601, is_old=False)]
</code></pre>
<pre><code class="language-python"># groupby clause
# returns first row of each group without any aggregation functions
table.select(groupby=table['is_old'])
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ GROUP BY _documents_.is_old





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=2, name='user_1', age=0.7524872495613466, is_old=True)]
</code></pre>
<pre><code class="language-python"># compound groupby (weird example bc name is unique - have only one cat var in this demo)
table.select(groupby=(table['is_old'],table['name']), limit=3)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ GROUP BY _documents_.is_old, _documents_.name
 LIMIT ? OFFSET ?





[Record(id=1, name='user_0', age=0.30111935823671676, is_old=False),
 Record(id=3, name='user_2', age=0.33272186856831554, is_old=False),
 Record(id=6, name='user_5', age=0.300309388680601, is_old=False)]
</code></pre>
<pre><code class="language-python"># groupby clause using max aggregation function
# gets match age for both old and young groups
table.select(table['age'].max(), groupby=table['is_old'])
</code></pre>
<pre><code>DocTable: SELECT max(_documents_.age) AS max_1 
FROM _documents_ GROUP BY _documents_.is_old





[0.46166274965800924, 0.9011039173289395]
</code></pre>
<h2 id="sql-string-commands-and-additional-clauses">SQL String Commands and Additional Clauses</h2>
<p>For cases where DocTable2 does not provide a convenient interface, you may submit raw SQL commands. These may be a bit more unwieldly, but they offer maximum flexibility. They may be used either as simply an addition to the WHERE or arbitrary end clauses, or accessed in totality.</p>
<pre><code class="language-python">qstr = 'SELECT age,name FROM {} WHERE id==&quot;{}&quot;'.format(table.tabname, 1)
results = table.execute(qstr)
dict(list(results)[0])
</code></pre>
<pre><code>DocTable: SELECT age,name FROM _documents_ WHERE id=="1"





{'age': 0.30111935823671676, 'name': 'user_0'}
</code></pre>
<pre><code class="language-python">wherestr = 'is_old==&quot;{}&quot;'.format('1')
table.select(wherestr=wherestr, limit=2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE (is_old=="1")
 LIMIT ? OFFSET ?





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True)]
</code></pre>
<pre><code class="language-python"># combine whrstr with structured query where clause
wherestr = 'is_old==&quot;{}&quot;'.format('1')
table.select(where=table['id']&lt;=5, wherestr=wherestr)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id &lt;= ? AND (is_old=="1")





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True),
 Record(id=5, name='user_4', age=0.6092744222076869, is_old=True)]
</code></pre>
<pre><code class="language-python"># combine whrstr with structured query where clause
wherestr = 'is_old==&quot;{}&quot;'.format('1')
table.select(where=table['id']&lt;=5, wherestr=wherestr)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.name, _documents_.age, _documents_.is_old 
FROM _documents_ 
WHERE _documents_.id &lt;= ? AND (is_old=="1")





[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True),
 Record(id=4, name='user_3', age=0.9011039173289395, is_old=True),
 Record(id=5, name='user_4', age=0.6092744222076869, is_old=True)]
</code></pre>
<h2 id="count-method-and-get-next-id">Count Method and Get Next ID</h2>
<p><code>.count()</code> is a convenience method. Mostly the same could be accomplished by <code>db.select_first(db['id'].count())</code>, but this requires no reference to a specific column.</p>
<p><code>.next_id()</code> is especially useful if one hopes to enter the id (or any primary key column) into new rows manually. Especially useful because SQL engines don't provide new ids except when a single insert is performed.</p>
<pre><code class="language-python">table.count()
</code></pre>
<pre><code>DocTable: SELECT count(_documents_.id) AS count_1 
FROM _documents_
 LIMIT ? OFFSET ?


/DataDrive/code/doctable/examples/../doctable/doctable.py:403: UserWarning: Method .count() is depricated. Please use .q.count() instead.
  warnings.warn('Method .count() is depricated. Please use .q.count() instead.')





10
</code></pre>
<pre><code class="language-python">table.count(table['age'] &lt; 0.5)
</code></pre>
<pre><code>DocTable: SELECT count(_documents_.id) AS count_1 
FROM _documents_ 
WHERE _documents_.age &lt; ?
 LIMIT ? OFFSET ?





5
</code></pre>
<h2 id="select-as-pandas-series-and-dataframe">Select as Pandas Series and DataFrame</h2>
<p>These are especially useful when working with metadata because Pandas provides robust descriptive and plotting features than SQL alone. Good for generating sample information.</p>
<pre><code class="language-python"># must provide only a single column
table.select_series(table['age']).head(2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_





0    0.301119
1    0.752487
dtype: float64
</code></pre>
<pre><code class="language-python">table.select_series(table['age']).quantile([0.025, 0.985])
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_





0.025    0.105159
0.985    0.881041
dtype: float64
</code></pre>
<pre><code class="language-python">table.select_df(['id','age']).head(2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.age 
FROM _documents_


/DataDrive/code/doctable/examples/../doctable/doctable.py:420: UserWarning: Method .select_df() is depricated. Please use .q.select_df() instead.
  warnings.warn('Method .select_df() is depricated. Please use .q.select_df() instead.')
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.301119</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.752487</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">table.select_df('age').head(2)
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_


/DataDrive/code/doctable/examples/../doctable/doctable.py:420: UserWarning: Method .select_df() is depricated. Please use .q.select_df() instead.
  warnings.warn('Method .select_df() is depricated. Please use .q.select_df() instead.')
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.301119</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.752487</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python"># must provide list of cols (even for one col)
table.select_df([table['id'],table['age']]).corr()
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.age 
FROM _documents_


/DataDrive/code/doctable/examples/../doctable/doctable.py:420: UserWarning: Method .select_df() is depricated. Please use .q.select_df() instead.
  warnings.warn('Method .select_df() is depricated. Please use .q.select_df() instead.')
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>id</th>
      <td>1.000000</td>
      <td>0.006293</td>
    </tr>
    <tr>
      <th>age</th>
      <td>0.006293</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">table.select_df([table['id'],table['age']]).describe().T
</code></pre>
<pre><code>DocTable: SELECT _documents_.id, _documents_.age 
FROM _documents_


/DataDrive/code/doctable/examples/../doctable/doctable.py:420: UserWarning: Method .select_df() is depricated. Please use .q.select_df() instead.
  warnings.warn('Method .select_df() is depricated. Please use .q.select_df() instead.')
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>id</th>
      <td>10.0</td>
      <td>5.500000</td>
      <td>3.027650</td>
      <td>1.000000</td>
      <td>3.25000</td>
      <td>5.500000</td>
      <td>7.750000</td>
      <td>10.000000</td>
    </tr>
    <tr>
      <th>age</th>
      <td>10.0</td>
      <td>0.499993</td>
      <td>0.256825</td>
      <td>0.048502</td>
      <td>0.30902</td>
      <td>0.535469</td>
      <td>0.659958</td>
      <td>0.901104</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">mean_age = table.select_series(table['age']).mean()
df = table.select_df([table['id'],table['age']])
df['old_grp'] = df['age'] &gt; mean_age
df.groupby('old_grp').describe()
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_
DocTable: SELECT _documents_.id, _documents_.age 
FROM _documents_


/DataDrive/code/doctable/examples/../doctable/doctable.py:415: UserWarning: Method .select_series() is depricated. Please use .q.select_series() instead.
  warnings.warn('Method .select_series() is depricated. Please use .q.select_series() instead.')
/DataDrive/code/doctable/examples/../doctable/doctable.py:420: UserWarning: Method .select_df() is depricated. Please use .q.select_df() instead.
  warnings.warn('Method .select_df() is depricated. Please use .q.select_df() instead.')
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="8" halign="left">id</th>
      <th colspan="8" halign="left">age</th>
    </tr>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>old_grp</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>False</th>
      <td>5.0</td>
      <td>5.0</td>
      <td>2.915476</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>6.0</td>
      <td>7.0</td>
      <td>8.0</td>
      <td>5.0</td>
      <td>0.288863</td>
      <td>0.149865</td>
      <td>0.048502</td>
      <td>0.300309</td>
      <td>0.301119</td>
      <td>0.332722</td>
      <td>0.461663</td>
    </tr>
    <tr>
      <th>True</th>
      <td>5.0</td>
      <td>6.0</td>
      <td>3.391165</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>5.0</td>
      <td>0.711122</td>
      <td>0.120456</td>
      <td>0.609274</td>
      <td>0.619203</td>
      <td>0.673543</td>
      <td>0.752487</td>
      <td>0.901104</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python"># more complicated groupby aggregation.
# calculates the variance both for entries above and below average age
mean_age = table.select_series(table['age']).mean()
df = table.select_df([table['name'],table['age']])
df['old_grp'] = df['age']&gt;mean_age
df.groupby('old_grp').agg(**{
    'first_name':pd.NamedAgg(column='name', aggfunc='first'),
    'var_age':pd.NamedAgg(column='age', aggfunc=np.var),
})
</code></pre>
<pre><code>DocTable: SELECT _documents_.age 
FROM _documents_
DocTable: SELECT _documents_.name, _documents_.age 
FROM _documents_


/DataDrive/code/doctable/examples/../doctable/doctable.py:415: UserWarning: Method .select_series() is depricated. Please use .q.select_series() instead.
  warnings.warn('Method .select_series() is depricated. Please use .q.select_series() instead.')
/DataDrive/code/doctable/examples/../doctable/doctable.py:420: UserWarning: Method .select_df() is depricated. Please use .q.select_df() instead.
  warnings.warn('Method .select_df() is depricated. Please use .q.select_df() instead.')
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>first_name</th>
      <th>var_age</th>
    </tr>
    <tr>
      <th>old_grp</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>False</th>
      <td>user_0</td>
      <td>0.022459</td>
    </tr>
    <tr>
      <th>True</th>
      <td>user_1</td>
      <td>0.014510</td>
    </tr>
  </tbody>
</table>
</div>

<h1 id="select-with-buffer">Select with Buffer</h1>
<p>In cases where you have many rows or each row contains a lot of data, you may want to perform a select query which makes requests in chunks. This is performed using the SQL OFFSET command, and querying up to buffsize while yielding each returned row. This system is designed this way because the underlying sql engine buffers all rows retreived from a query, and thus there is no way to stream data into memory without this system.</p>
<p>NOTE: The limit keyword is incompatible with this method - it will return all results. A workaround is to use the approx_max_rows param, which will return at minimum this number of rows, at max the specified number of rows plus buffsize.</p>
<pre><code class="language-python">for row_chunk in table.select_chunks(chunksize=2, where=(table['id']%2)==0, verbose=False):
    print(row_chunk)
</code></pre>
<pre><code>[Record(id=2, name='user_1', age=0.7524872495613466, is_old=True), Record(id=4, name='user_3', age=0.9011039173289395, is_old=True)]
[Record(id=6, name='user_5', age=0.300309388680601, is_old=False), Record(id=8, name='user_7', age=0.46166274965800924, is_old=False)]
[Record(id=10, name='user_9', age=0.6192026652607745, is_old=True)]
[]
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>